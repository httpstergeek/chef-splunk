# 
# $SPLUNK_HOME/etc/system/local/server.conf 
#
# Generated by Chef templates/default/system-server.conf.erb
#

[general]
serverName = <%= node[:hostname] %>

[lmpool:auto_generated_pool_download-trial]
description = auto_generated_pool_download-trial
quota = MAX
slaves = *
stack_id = download-trial

[lmpool:auto_generated_pool_forwarder]
description = auto_generated_pool_forwarder
quota = MAX
slaves = *
stack_id = forwarder

[lmpool:auto_generated_pool_free]
description = auto_generated_pool_free
quota = MAX
slaves = *
stack_id = free

[sslConfig]
<%-if node[:splunk][:ssl_backend_options][:enable_ssl] %>
sslKeysfilePassword = <%= @keyvalue %>
sslKeysfile = <%= @backend_cert %>
caCertFile = <%= @backend_ca_cert %>
<%-else %>
sslKeysfilePassword = <%= @keyvalue %>
<%-end %>

<%-if node[:splunk][:type] == 'search' && node[:splunk][:searchpool][:enable_pool] %>
[pooling]
state=enabled
storage=<%= node[:splunk][:searchpool][:symlink_location] %>

<%-end %>
<% unless node[:splunk][:type] == 'searchpool' -%>
[license]
master_uri=<%= "https://#{node[:splunk][:license_uri]}:#{node[:splunk][:mgmt_port]}" %>
<%end -%>
