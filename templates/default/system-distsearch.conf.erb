#                                                                     
# $SPLUNK_HOME/etc/system/local/distsearch.conf                 
#                                                                     
# Generated by Chef templates/default/system-system-distsearch.conf.erb
#
#
#
[distributedSearch]
<%-if node[:splunk][:type] == 'search' %>
shareBundles=<%= node[:splunk][:distsearch][:share_bundles].inspect %>
<%-if node[:splunk][:distsearch][:enable_distsearch] %>
<% search_peers=node[:splunk][:distsearch][:search_peers].map {|search_peer| "#{search_peer}:#{node[:splunk][:mgmt_port]}"}%>
<% search_peers=search_peers.join(',') %>
servers=<%= search_peers %>
<%-end %>
<%-end %>

<%-if node[:splunk][:type] == 'indexer' && node[:splunk][:distsearch][:mounted_bundles] %>
<% node[:splunk][:distsearch][:search_bundles].each do |search_bundle| -%>
<% search_bundle[:search_heads].each do |search_head| -%>
[searchhead:<%= search_head %>]
mounted_bundles=<%= node[:splunk][:distsearch][:mounted_bundles].inspect %>
bundles_location=<%= search_bundle[:bundle_location][:symlink_location] %>

<% end-%>
<% end-%>
<%-end %>
